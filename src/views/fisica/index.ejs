<% const items = Array.isArray(fisica) ? fisica : []; %>

<h1>Datos Generales del Levitador</h1>

<% if (error) { %>
  <p style="color:red"><%= error %></p>
<% } else if (items.length > 0) { %>
  <!-- tu tabla usando "items" -->
  <table>
    <thead>…</thead>
    <tbody>
      <% items.forEach(f => { %>
        <tr>
          <td><%= f.ID_FISICA %></td>
          <td><%= f.voltaje %></td>
          <td><%= f.temperatura %></td>
          <td><%= f.distancia %></td>
          <td>
            <% const raw = f.Fecha_Datos;
               const d = raw ? new Date(typeof raw === 'string' ? raw.replace(' ','T') : raw) : null; %>
            <%= d ? d.toISOString().replace('T',' ').slice(0,16) : '—' %>
          </td>
          <td><a href="/fisica/<%= f.ID_FISICA %>">Ver</a></td>
          <td><a href="/fisica/<%= f.ID_FISICA %>/edit">Editar</a></td>
          <td>
            <form action="/fisica/<%= f.ID_FISICA %>?_method=DELETE" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('¿Seguro?')">Eliminar</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } else { %>
  <p>No hay registros aún. <a href="/fisica/create">Crea el primero</a>.</p>
<% } %>
