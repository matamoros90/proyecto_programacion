<% const items = Array.isArray(fisica) ? fisica : []; %>

<h1>Datos Generales del Levitador</h1>

<% if (error) { %>
  <p style="color:red"><%= error %></p>
<% } %>

<div class="container-center">
  <section class="contenedor table-panel">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Voltaje</th>
          <th>Temperatura</th>
          <th>Distancia</th>
          <th>Fecha</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <% if (items.length > 0) { %>
          <% items.forEach(f => { %>
            <tr>
              <td><%= f.id_fisica %></td>
              <td><%= f.voltaje %></td>
              <td><%= f.temperatura %></td>
              <td><%= f.distancia %></td>
              <td>
                <% const raw = f.fecha_datos; const d = raw ? new Date(raw) : null; %>
                <%= d ? d.toISOString().replace('T',' ').slice(0,16) : '—' %>
              </td>

              <td>
                <a href="/fisica/<%= f.id_fisica %>">Ver</a>
                <a href="/fisica/<%= f.id_fisica %>/edit">Editar</a>
                <form action="/fisica/<%= f.id_fisica %>?_method=DELETE" method="POST" style="display:inline;">
                  <button type="submit" onclick="return confirm('¿Seguro que desea eliminar?')">Eliminar</button>
                </form>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr><td colspan="6" style="text-align:center">No hay registros aún. <a href="/fisica/create">Crea el primero</a>.</td></tr>
        <% } %>
      </tbody>
    </table>
  </section>
</div>
